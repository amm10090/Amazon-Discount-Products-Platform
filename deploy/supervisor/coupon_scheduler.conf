[program:coupon_scheduler]
command=%(ENV_PROJECT_ROOT)s/venv/bin/python %(ENV_PROJECT_ROOT)s/scripts/schedule_coupon_scraper.py
directory=%(ENV_PROJECT_ROOT)s
user=root
autostart=true
autorestart=true
startretries=3
stopwaitsecs=10
stopasgroup=true
killasgroup=true
stdout_logfile=%(ENV_PROJECT_ROOT)s/logs/supervisor_coupon_scheduler.log
stderr_logfile=%(ENV_PROJECT_ROOT)s/logs/supervisor_coupon_scheduler_error.log
environment=PYTHONUNBUFFERED=1

; 添加环境变量，确保调度器可以访问所有需要的配置
environment=
    PYTHONPATH="%(ENV_PROJECT_ROOT)s",
    APP_LOG_DIR="%(ENV_PROJECT_ROOT)s/logs" 